"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var _1=__importDefault(require("./"));window.HorizontalScroll=_1.default;var __extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),__read=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,s=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=s.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}return a};Object.defineProperty(exports,"__esModule",{value:!0});var events_1=require("events"),rebound_1=require("rebound"),SCROLL_AMOUNT=100,SCROLL_AMOUNT_STEP=10*SCROLL_AMOUNT,HorizontalScroll=function(u){function e(e){var t,n,r=void 0===e?{}:e,o=(r.scrollAmount,r.scrollAmountStep,r.container),s=void 0===o?document.documentElement:o,a=r.showScrollbars,i=void 0!==a&&a,l=r.preventVerticalScroll,c=void 0!==l&&l,d=u.call(this)||this;return d.observer=null,d.containerIsIntersecting=!1,d.style=null,d.cssClass="__horizontal-container-"+Math.round(1e5*Math.random()),d.preventVerticalScroll=!1,d.blacklist=["input","select","textarea"],d.wheel=function(e){e.preventDefault();var t=Math.atan2(e.deltaY,e.deltaX)/Math.PI,n=!(t<.675&&-.375<t),r=Math.sqrt(Math.pow(e.deltaX,2)+Math.pow(e.deltaY,2));if(!d.preventVerticalScroll){switch(e.deltaMode){case WheelEvent.DOM_DELTA_LINE:r*=SCROLL_AMOUNT;break;case WheelEvent.DOM_DELTA_PAGE:r*=SCROLL_AMOUNT_STEP}n&&(r*=-1);var o=Math.max(d.container.scrollLeft+r,0);o<d.container.scrollWidth-d.container.clientWidth&&(e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?d.spring.setCurrentValue(o):d.spring.setEndValue(o))}},d.keydown=function(e){if(!d.observer||d.containerIsIntersecting){var t=e.target;if(!t||t===document.body||!d.blacklist.includes(t.nodeName.toLowerCase())){var n=d.container.scrollLeft,r=d.container.scrollWidth-d.container.clientWidth,o=!0;switch(e.code){case"Home":n=0;break;case"End":n=r;break;case"ArrowUp":if(d.preventVerticalScroll){o=!0;break}n-=SCROLL_AMOUNT;break;case"ArrowDown":if(d.preventVerticalScroll){o=!0;break}n+=SCROLL_AMOUNT;break;case"ArrowLeft":n-=SCROLL_AMOUNT;break;case"ArrowRight":n+=SCROLL_AMOUNT;break;case"PageUp":n-=SCROLL_AMOUNT_STEP;break;case"PageDown":case"Space":n+=SCROLL_AMOUNT_STEP;break;default:o=!1}n=Math.max(n,0),(n=Math.min(n,r))!==d.spring.getEndValue()&&(o&&e.preventDefault(),d.spring&&(d.spring.isAtRest()&&d.spring.setCurrentValue(d.container.scrollLeft),d.spring.setEndValue(n)))}}},void 0===s||(d.preventVerticalScroll=c,d.container=s,d.container.addEventListener("wheel",d.wheel),document.addEventListener("keydown",d.keydown),d.container!==document.documentElement&&("IntersectionObserver"in window?(d.observer=new IntersectionObserver(function(e){var t=__read(e,1)[0];d.containerIsIntersecting=t.isIntersecting}),d.observer.observe(d.container)):console.warn("[horizontal-scroll] WARN: IntersectionObserver not available, assuming key navigation is always applicable to your container.")),i||(d.container.classList.add(d.cssClass),d.style=document.createElement("style"),document.head.appendChild(d.style),(t=d.style.sheet)&&(t.insertRule("\n                        ."+d.cssClass+" {\n                            overflow-y: hidden;\n                            overflow-x: auto;\n\n                            /* prevents unwanted gestures and bounce effects */\n                            overscroll-behavior: auto;\n\n                            /* vendor specific hacks to hide scrollbars */\n                            scrollbar-width: none;\n                            -ms-overflow-style: none;\n                        }\n                    "),n="::-webkit-scrollbar { display: none; }",d.container!==document.documentElement&&(n="."+d.cssClass+n),t.insertRule(n))),d.springSystem=new rebound_1.SpringSystem,d.spring=d.springSystem.createSpring(),d.spring.setCurrentValue(d.container.scrollLeft),d.spring.setOvershootClampingEnabled(!0),d.spring.addListener({onSpringUpdate:function(e){var t=e.getCurrentValue();d.emit("scroll",t),d.container.style.overscrollBehaviorY="none",d.container.style.overscrollBehaviorX=0<t?"none":"auto",d.container.scrollLeft=t}}),d.spring.notifyPositionUpdated()),d}return __extends(e,u),e.prototype.destroy=function(){void 0!==this.container&&(this.container.removeEventListener("wheel",this.wheel),document.removeEventListener("keydown",this.keydown),this.style&&this.style.remove(),this.container.classList.remove(this.cssClass),this.spring.destroy(),this.springSystem.removeAllListeners(),this.observer&&this.observer.disconnect())},e}(events_1.EventEmitter);exports.default=HorizontalScroll;